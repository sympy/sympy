# ------------------------------------------------------------------ #
#                                                                    #
#              SymPy CI script for Github Actions                    #
#                                                                    #
#  Upload a nightly wheel to the Anaconda scientific-python channel  #
#                                                                    #
#         https://scientific-python.org/specs/spec-0004/             #
#                                                                    #
# ------------------------------------------------------------------ #

name: nightly-wheel-upload
on:
  push:
    branches:
      - master

jobs:
  nightly-wheel:
    runs-on: ubuntu-22.04
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: '3.13'
      - run: python -m pip install --upgrade pip build
      - run: python -m build --wheel

      - name: Upload wheel
        uses: scientific-python/upload-nightly-action@82396a2ed4269ba06c6b2988bb4fd568ef3c3d6b # 0.6.1
        with:
          artifacts_path: dist
          # This token is generated from anaconda.org
          # https://github.com/scientific-python/upload-nightly-action/issues/111
          anaconda_nightly_upload_token: ${{ secrets.ANACONDA_ORG_UPLOAD_TOKEN }}
